@model Proyecto_Final_Desarrollo_Web.ViewModels.ClienteViewModel

@{
    ViewBag.Title = "Detalles del Cliente";
}

<h2>Detalles del Cliente</h2>

<div class="card">
    <div class="card-body">
        <h4 class="card-title">@Model.NombreCompleto</h4>
        <p><strong>Correo:</strong> @Model.Correo</p>
        <p><strong>Teléfono:</strong> @Model.Teléfono</p>
        <p><strong>Dirección:</strong> @Model.dirección</p>
        <p><strong>Tipo de Documento:</strong> @Model.tipo_documento</p>
        <p><strong>Número de Documento:</strong> @Model.numero_documento</p>
        <p><strong>Total Compras:</strong> @Model.TotalCompras.ToString("C")</p>
        <p><strong>Última Compra:</strong> @(Model.UltimaCompra.HasValue ? Model.UltimaCompra.Value.ToString("dd/MM/yyyy") : "No disponible")</p>
    </div>
</div>

<h3>Historial de Compras</h3>
<table class="table table-striped">
    <thead>
        <tr>
            <th>ID Factura</th>
            <th>Fecha</th>
            <th>Total</th>
            <th>Estado</th>
            <th>Productos</th>
        </tr>
    </thead>
    <tbody>
        @if (Model.Facturas != null && Model.Facturas.Any())
        {
            foreach (var factura in Model.Facturas)
            {
                <tr>
                    <td>@factura.id_Factura</td>
                    <td>@factura.fecha?.ToString("dd/MM/yyyy")</td>
                    <td>@factura.total.ToString("C")</td>
                    <td>@factura.estado</td>
                    <td>@factura.CantidadProductos</td>
                </tr>
            }
        }
        else
        {
            <tr>
                <td colspan="5" class="text-center">No hay facturas registradas para este cliente.</td>
            </tr>
        }
    </tbody>
</table>

<a href="@Url.Action("Clientes", "Clientes")" class="btn btn-secondary">Volver a la Lista</a>
